# 227. 基本计算器 II


## 解题思路

* 字符处理和数据结构初始化：

* 将输入的表达式字符串转换为字符队列，并创建一个整数栈用于存储中间结果。
* 循环处理字符队列：

  * 通过循环遍历字符队列，逐个处理字符。
  * 如果遇到数字字符，将其转换为数字并累加到当前数字中。
  * 如果遇到非数字字符且不是空格，或者队列已经为空，则执行相应的操作：
  * 加法：将当前数字入栈。
  * 减法：将当前数字的相反数入栈。
  * 乘法：将栈顶元素与当前数字相乘，并将结果入栈。
  * 除法：将栈顶元素除以当前数字，并将结果入栈。
* 在以上操作后，重置当前数字为0，并更新当前符号为处理的字符。
处理括号：

* 如果遇到右括号，跳出循环。
* 计算最终结果：

* 遍历整数栈中的元素，并将其累加得到最终的计算结果。
返回结果：

* 将最终计算结果返回

```java
class Solution {
    public int calculate(String s) {
        Queue<Character> queueS = new LinkedList<>();
        for(char c:s.toCharArray()){
            queueS.add(c);
        }

        return helper(queueS);
    }

    private int helper(Queue<Character> s){
        Stack<Integer> stack = new Stack<>();// 存储中间结果
        int num = 0;
        int sign = '+';

        while(!s.isEmpty()){
            char c = s.poll();// 取出当前字符
            if(Character.isDigit(c)){
                // 如果是数字字符
                num  = num * 10 + Character.getNumericValue(c);
            }
            
            if(!Character.isDigit(c) && c != ' ' || s.isEmpty()){
                if(sign == '+'){
                    stack.push(num);
                }else if(sign == '-'){
                    stack.push(-num);
                }else if(sign == '*'){
                    stack.push(stack.pop() * num);
                }else if(sign == '/'){
                    stack.push(stack.pop() / num);
                }

                num = 0;
                sign  = c;
            }

            // 遇到右括号返回递归结果
            if(c == ')'){
                break;
            }


        }

        int res = 0;
        for(int i :stack){
            res += i;
        }


        return res;
    }
}


```