# 18. 四数之和

## 解题思路

* 外围的四数之和（fourSumTarget 方法）：
  * 首先对输入数组nums进行排序，这样可以方便后面进行双指针搜索，同时也有助于去除重复的元组。
  * 遍历排序好的数组，固定第一个数nums[i]然后对剩余的部分进行三数之和的搜索。
  * 每次找到三数之和的结果(temp)后，将固定的数nums[i]添加到每个三元组中，转换成一个四元组并加入最终结果res中。
  * 在每次循环的最后，移动指针i跳过相同的元素，以防止四元组重复。
* 中间层的三数之和（threeSum 方法）：
  * 从指定的start位置开始遍历，固定第一个数nums[i]，然后在剩余数组中寻找两个数其和为target - nums[i]。
  * 通过调用twoSumTarget方法来找出所有满足条件的两数之和的组合temp。
  * 将每个找到的组合temp转换成三元组，将固定的数nums[i]添加进去。
  * 同样的，移动指针i跳过重复元素，以防重复的三元组。
* 最内层的两数之和（twoSumTarget 方法）：
  * 使用双指针方法来找出所有和为给定target的两个数，这里的target是由threeSum方法传递下来的目标和。
  * 通过左右指针left和right在排序数组中向中间搜索，当找到两数之和等于目标时，记录这一对数到结果列表。
  * 与前两个方法相同，对左右指针分别向内移动以跳过重复的元素，防止结果集中出现重复的组合。

```java
class Solution {

    // 转换为三数之和 在转换为两数之和
    List<List<Integer>> res = new ArrayList<>();
     public List<List<Integer>> fourSum(int[] nums, int target){
         return fourSumTarget(nums,(long)target);
     }

    public List<List<Integer>> fourSumTarget(int[] nums, long target) {
        // 首先对数组进行排序
        Arrays.sort(nums);
        int n = nums.length;

        for(int i = 0; i < n; i++){
            List<List<Integer>> temp = threeSum(nums,i+1,target - (long)nums[i]);
            // 添加元素 成为三元组
            for(List<Integer> t: temp){
                t.add(nums[i]);
                res.add(t);
            }

            // 去除第一个重复元素
            while(i < n - 1 && nums[i] == nums[i+1]){
                i++;
            }
        }
        return res;
    }


    public List<List<Integer>> threeSum(int[] nums, int start,long target){
        int n = nums.length;

        List<List<Integer>> result = new ArrayList<>();

        for(int i = start; i < n; i++){

            // 满足条件的temp 不止一个
            List<List<Integer>> temp = twoSumTarget(nums,i+1,target - (long)nums[i]);

            // 添加元素 成为三元组
            for(List<Integer> t: temp){
                t.add(nums[i]);
                result.add(t);
            }

            // 去除第一个重复元素
            while(i < n - 1 && nums[i] == nums[i+1]){
                i++;
            }
        }


        return result;
    }

    public List<List<Integer>> twoSumTarget(int[] nums, int start,long target){
        int n = nums.length;
        List<List<Integer>> result = new ArrayList<>();

        int left = start;
        int right = n - 1;

        long t = target;


        while(left < right){
            long sum = (long)nums[left] + (long)nums[right];
            long l = nums[left];
            long r = nums[right];

            if(sum == t){
                List<Integer> a = new ArrayList<>();
                a.add(nums[left]);
                a.add(nums[right]);
                result.add(a);

                // 去除重复的元素
                while(left < right && nums[left] == l){
                    left++;
                }

                // 去除重复元素
                while(left < right && nums[right] == r){
                    right--;
                }
            }else if(sum < t){
                while(left < right && nums[left] == l){
                    left++;
                }
            }else if(sum > t){
                while(left < right && nums[right] == r){
                    right--;
                }
            }
        }

        return result;
    }
}

```