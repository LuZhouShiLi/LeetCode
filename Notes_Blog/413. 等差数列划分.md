# 413. 等差数列划分


## 解题思路


* 定义一个数组 dp，其中 dp[i] 表示以 nums[i] 结尾的等差子数组的个数。

* 使用一个循环遍历数组 nums，从索引 1 开始，直到 nums.length - 2 结束。这是因为要保证以 nums[i] 结尾的子数组至少包含三个元素，以形成等差数列。

* 在循环中，判断当前元素 nums[i] 是否与其前一个元素 nums[i - 1] 和后一个元素 nums[i + 1] 构成等差数列。如果是，则说明以 nums[i] 结尾的子数组中新增了一个等差子数组，因此将 dp[i] 设置为 dp[i - 1] + 1。

* 最后，遍历数组 dp，将所有的 dp[i] 累加起来，得到等差子数组的总个数。

* 返回累加得到的总个数。

```java
class Solution {
    public int numberOfArithmeticSlices(int[] nums) {
        // dp[i] 代表以nums[i]结尾的等差子数组的个数

        // if(nums.length < 3){
        //     return 0;
        // }

        int[] dp = new int[nums.length];

        // dp[0] = 0;
        // dp[1] = 0;// base case

        for(int i = 1; i <= nums.length - 2; i++){
            if(nums[i - 1] + nums[i + 1] == nums[i] * 2){
                // 如果A[i] 和前面的元素构成等差数列 -》 +1
                dp[i] = dp[i - 1] + 1;
            }
        }

        int sum = 0;
        for(int i = 0; i < dp.length; i++){
            sum += dp[i];
        }

        return sum;

    }
}

```